<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MoMoney.Views.AddTransactionPage"
             NavigationPage.HasNavigationBar="False"
             xmlns:viewmodel="clr-namespace:MoMoney.ViewModels"
             xmlns:model="clr-namespace:MoMoney.Models"
             x:DataType="viewmodel:AddTransactionViewModel"
             Loaded="ContentPage_Loaded"
             Title="">

    <ContentPage.BindingContext>
        <viewmodel:AddTransactionViewModel />
    </ContentPage.BindingContext>

    <!-- main page -->
    <VerticalStackLayout>
        
        <!-- transaction type buttons -->
        <Frame Style="{StaticResource confrTile}" Margin="10" Padding="2">
            <Grid x:Name="grdTransactionTypeButtons" Margin="1" ColumnDefinitions="*,*,*" ColumnSpacing="10">
                <Button x:Name="btnIncome" Grid.Column="0" Text="Income" Clicked="btnIncome_Clicked" />
                <Button x:Name="btnExpense" Grid.Column="1" Text="Expense" Clicked="btnExpense_Clicked" />
                <Button x:Name="btnTransfer" Grid.Column="2" Text="Transfer" Clicked="btnTransfer_Clicked" />
            </Grid>
        </Frame>
        <!-- Date -->
        <Frame Style="{StaticResource frTile}">
            <Grid ColumnDefinitions="0.15*,*">
                <Image Source="calendar.png" Style="{StaticResource icon}" />
                <DatePicker x:Name="dtDate" Grid.Column="1" VerticalOptions="Center" Date="{Binding Date}" />
            </Grid>
        </Frame>
        <!-- Account -->
        <Frame Style="{StaticResource frTile}">
            <Grid ColumnDefinitions="0.15*,*">
                <Image Source="credit_card.png" Style="{StaticResource icon}" />
                <Picker x:Name="pckAccount"
                        Grid.Column="1"
                        Title="Select an Account"
                        x:DataType="model:Account"
                        ItemsSource="{Binding Path=Accounts, Source={RelativeSource AncestorType={x:Type viewmodel:AddTransactionViewModel}}}"
                        ItemDisplayBinding="{Binding AccountName}"
                        SelectedIndexChanged="pckAccount_SelectedIndexChanged" />
            </Grid>
        </Frame>
        <!-- Amount -->
        <Frame Style="{StaticResource frTile}">
            <Grid ColumnDefinitions="0.15*,*">
                <Image Source="dollar_symbol.png" Style="{StaticResource icon}" />
                <Entry x:Name="txtAmount" Grid.Column="1" Placeholder="$0.00" Text="{Binding Amount}" />
            </Grid>
        </Frame>
        <!-- Category -->
        <Frame Style="{StaticResource frTile}">
            <Grid ColumnDefinitions="0.15*,*">
                <Image Source="category.png" Style="{StaticResource icon}" />
                <Picker x:Name="pckCategory"
                        Grid.Column="1"
                        Title="Select a Category"
                        x:DataType="model:Category"
                        ItemsSource="{Binding Path=Categories, Source={RelativeSource AncestorType={x:Type viewmodel:AddTransactionViewModel}}}"
                        ItemDisplayBinding="{Binding CategoryName}"
                        SelectedIndexChanged="pckCategory_SelectedIndexChanged" />
            </Grid>
        </Frame>
        <!-- Subcategory -->
        <Frame Style="{StaticResource frTile}">
            <Grid ColumnDefinitions="0.15*,*">
                <Image Source="subcategory.png" Style="{StaticResource icon}" />
                <Picker x:Name="pckSubcategory"
                        Grid.Column="1"
                        Title="Select a Subcategory"
                        x:DataType="model:Category"
                        ItemsSource="{Binding Path=Subcategories, Source={RelativeSource AncestorType={x:Type viewmodel:AddTransactionViewModel}}}"
                        ItemDisplayBinding="{Binding CategoryName}"
                        SelectedIndexChanged="pckSubcategory_SelectedIndexChanged" />
            </Grid>
        </Frame>
        <!-- Payee -->
        <Frame x:Name="frPayee" Style="{StaticResource frTile}" IsVisible="True">
            <Grid ColumnDefinitions="0.15*,*">
                <Image Source="account.png" Style="{StaticResource icon}" />
                <Entry x:Name="txtPayee" Grid.Column="1" Placeholder="Payee" Text="{Binding Payee}" />
            </Grid>
        </Frame>
        <!-- Transfer Payee Account -->
        <Frame x:Name="frTransferTo" Style="{StaticResource frTile}" IsVisible="False">
            <Grid ColumnDefinitions="0.15*,*">
                <Image Source="account.png" Style="{StaticResource icon}" />
                <Picker x:Name="pckTransferTo"
                        Grid.Column="1"
                        Title="Select an Account"
                        x:DataType="model:Account"
                        ItemsSource="{Binding Path=Accounts, Source={RelativeSource AncestorType={x:Type viewmodel:AddTransactionViewModel}}}"
                        ItemDisplayBinding="{Binding AccountName}"
                        SelectedIndexChanged="pckTransferTo_SelectedIndexChanged"/>
            </Grid>
        </Frame>
        <!-- clear/enter buttons -->
        <Grid x:Name="grdAcceptButtons" Margin="10,0,10,10" Padding="2" ColumnDefinitions="*,*" ColumnSpacing="10">
            <Button x:Name="btnClear" Grid.Column="0" Text="Clear"
                    BackgroundColor="{StaticResource Blue}" Clicked="btnClear_Clicked" />
            <Button x:Name="btnEnter" Grid.Column="1" Text="Accept"
                    BackgroundColor="{StaticResource Green}" Clicked="btnEnter_Clicked" Command="{Binding AddCommand}" />
        </Grid>
    </VerticalStackLayout>
    
</ContentPage>